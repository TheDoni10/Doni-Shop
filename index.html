<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>DonVotex - Sistema de Votaciones</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/x-icon" href="https://i.ibb.co/wZ0PH190/vote-icono.png" />
<link rel="stylesheet" href="styless.css">

</head>
<body>
  <!-- Fondo animado -->
  <div class="background-anim">
    <div class="bubble" style="left: 10%; animation-delay: 0s;"></div>
    <div class="bubble" style="left: 25%; animation-delay: 2s;"></div>
    <div class="bubble" style="left: 40%; animation-delay: 4s;"></div>
    <div class="bubble" style="left: 60%; animation-delay: 1s;"></div>
    <div class="bubble" style="left: 75%; animation-delay: 3s;"></div>
    <div class="bubble" style="left: 90%; animation-delay: 5s;"></div>
  </div>

  <div class="container">
    <h1>DonVotex 2025</h1>
    <p>La plataforma moderna, r√°pida y segura para votaciones estudiantiles.Sin internet ni instalaci√≥n complicada</p>

<!-- BOT√ìN DE DESCARGA -->
<a class="btn" id="descargarBtn">
  <span style="margin-right: 8px;">‚öôÔ∏è</span>DonVotex - Archivo .exe
</a>

<!-- ANIMACI√ìN DE DESCARGA -->
<div id="animDescarga" style="display:none; flex-direction:column; align-items:center; gap:10px;">
  <div class="spinner"></div>
  <div id="barraCarga" style="display:none; width:300px; height:20px; background:#222; border-radius:10px; overflow:hidden;">
    <div id="progreso" style="width:0%; height:100%; background:#00d9ff; transition:width 0.3s;"></div>
  </div>
  <p id="textoDescarga">Preparando descarga...</p>
</div>

<!-- DESCARGA COMPLETADA -->
<div id="descargaCompletada" style="display:none; text-align:center; margin-top:20px;">
  <p style="color:#4CAF50; font-size:1.5em;">‚úÖ Descarga completada</p>
  <p style="color:#8ab4ff;">Archivo: <strong>Donvoltex_Server_1.0.1.exe</strong></p>
  <div style="display:flex; gap:10px; justify-content:center;">
    <button id="btnEjecutar">‚ñ∂Ô∏è Ejecutar</button>
    <button id="btnCerrar">‚úñÔ∏è Cerrar</button>
  </div>
</div>

<script>
const CONFIG = {
  urlDescarga: "https://www.dropbox.com/scl/fi/ytaeotfu5yaazh37p7e2q/Donvoltex_Server_1.0.1.exe?rlkey=it5tlu7lblzw7v1m1v29koecp&st=ysfddxog&dl=1",
  nombreArchivo: "Donvoltex_Server_1.0.1.exe",
  velocidadProgreso: 250,
  incrementoMin: 5,
  incrementoMax: 15
};

const elementos = {
  btnDescargar: document.getElementById('descargarBtn'),
  animDescarga: document.getElementById('animDescarga'),
  barraCarga: document.getElementById('barraCarga'),
  barraProgreso: document.getElementById('progreso'),
  textoDescarga: document.getElementById('textoDescarga'),
  descargaCompletada: document.getElementById('descargaCompletada'),
  btnEjecutar: document.getElementById('btnEjecutar'),
  btnCerrar: document.getElementById('btnCerrar')
};

let descargaEnProceso = false;
let intervalo = null;

function mostrar(el, display='block'){ if(el) el.style.display=display; }
function ocultar(el){ if(el) el.style.display='none'; }
function actualizarProgreso(p){ elementos.barraProgreso.style.width=p+'%'; elementos.textoDescarga.textContent=`Descargando... ${p}%`; }
function resetUI(){ ocultar(elementos.animDescarga); ocultar(elementos.barraCarga); ocultar(elementos.descargaCompletada); if(elementos.barraProgreso) elementos.barraProgreso.style.width='0%'; }

function iniciarDescarga(){
  if(descargaEnProceso) return;
  descargaEnProceso = true;
  resetUI();
  mostrar(elementos.animDescarga, 'flex');
  mostrar(elementos.barraCarga, 'block');

  let progreso=0;
  intervalo = setInterval(()=>{
    let incremento = Math.floor(Math.random()*(CONFIG.incrementoMax-CONFIG.incrementoMin+1))+CONFIG.incrementoMin;
    progreso += incremento;
    if(progreso>=100){ progreso=100; clearInterval(intervalo); finalizarDescarga(); }
    actualizarProgreso(progreso);
  }, CONFIG.velocidadProgreso);
}

function finalizarDescarga(){
  ocultar(elementos.animDescarga);
  ocultar(elementos.barraCarga);
  mostrar(elementos.descargaCompletada);

  // Crear enlace real y forzar descarga
  const link = document.createElement('a');
  link.href = CONFIG.urlDescarga;
  link.download = CONFIG.nombreArchivo;
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);

  descargaEnProceso=false;
}

elementos.btnDescargar.addEventListener('click', e=>{ e.preventDefault(); iniciarDescarga(); });
elementos.btnCerrar.addEventListener('click', resetUI);
elementos.btnEjecutar.addEventListener('click', ()=>alert('Busca el archivo en Descargas y ejec√∫talo como administrador.'));
</script>


<!-- PARCHES -->
<div id="patch-section" class="card patches-card">
  <h2>üõ† Parches de Error</h2>
  <p>Si tu sistema presenta fallas como:</p>

  <ul>
    <li>Errores al iniciar.</li>
    <li>Fallas en el conteo de votos o candidatos.</li>
    <li>Problemas de compatibilidad.</li>
  </ul>

  <p>Haz clic en el bot√≥n <strong>Buscar Parche</strong> para comprobar si hay uno disponible.</p>
  <button class="btn" id="btnBuscarParche">üîç Buscar Parche</button>
</div>

<!-- NOVEDADES -->
<h2>Novedades</h2>
<ul class="card novedades-card">
  <li><strong>üó≥ M√≥dulo de candidatos:</strong> registro y votaci√≥n inteligente.</li>
  <li><strong>‚ö° Ultra r√°pido:</strong> sin internet ni instalaci√≥n complicada.</li>
  <li><strong>üõ° Mayor seguridad:</strong> validaci√≥n y protecci√≥n mejorada.</li>
</ul>

<!-- FUTURO -->
<div class="future-notice">
  <h3>üîÆ DonVotex Web 2027</h3>
  <p>Estamos implementando la versi√≥n web accesible desde cualquier dispositivo.</p>

  <ul>
    <li>üì± Compatible con Android y iOS</li>
    <li>üßë‚Äçüíª Panel exclusivo para jurados y observadores.</li>
    <li>üìä Gr√°ficos en resultados.</li>
    <li>üîí Seguridad mejorada en votos.</li>
    <li>üì± Versi√≥n m√≥vil optimizada.</li>
    <li>üïí Historial de elecciones anteriores.</li>
    <li>üîî Notificaciones en tiempo real.</li>
    <li>üé® Personalizaci√≥n de interfaz.</li>
    <li>üë• Control de roles y permisos.</li>
    <li>üì• Exportar resultados en PDF y Excel.</li>
  </ul>

  <p class="copyright">
    <em>¬© 2025 Reservado a Doni Beltr√°n Villalba | I.E.R Jhon F. Kennedy Sede el Cinco</em>
  </p>
</div>

  <!-- MODAL PARCHES -->
  <div id="modalParche" class="modal" aria-hidden="true" role="dialog" aria-labelledby="modalTitle" aria-modal="true">
    <div class="modal__box">
      <h3 id="modalTitle" class="modal__title">Buscando parches</h3>
      <div id="modalBody" class="modal__text">
        <div class="spinner" aria-hidden="true"></div>
        <div class="dots" aria-live="polite">Por favor espera</div>
      </div>
      <div id="modalExtras"></div>
      <div class="modal__actions" id="modalActions">
        <!-- Botones din√°micos -->
      </div>
      <div class="modal__hint" id="modalHint"></div>
    </div>
  </div>

  <script>
    // ================== CONFIG ==================
   const CONFIG = {
  urlDescarga: "https://dl.dropboxusercontent.com/scl/fi/ytaeotfu5yaazh37p7e2q/Donvoltex_Server_1.0.1.exe?rlkey=it5tlu7lblzw7v1m1v29koecp&st=ysfddxog",
  nombreArchivo: "Donvoltex_Server_1.0.1.exe",
  velocidadProgreso: 250,
  incrementoMin: 5,
  incrementoMax: 15
};

    // ============ DESCARGAS GENERALES ============
    let descargaEnProgreso = false;

    function iniciarDescarga(tipo) {
      if (descargaEnProgreso) {
        alert("‚è≥ Espera que termine la descarga anterior.");
        return;
      }
      const url = archivos[tipo];
      if (!url) {
        alert("‚ö†Ô∏è Link no configurado.");
        return;
      }
      descargaEnProgreso = true;

      const barra = document.getElementById("barraCarga");
      const progreso = document.getElementById("progreso");
      const info = document.getElementById("info");

      barra.style.display = "block";
      progreso.style.width = "0%";
      info.textContent = "‚è≥ Preparando archivo...";

      let porcentaje = 0;
      const animacion = setInterval(() => {
        porcentaje += Math.random() * 18 + 5;
        if (porcentaje >= 100) porcentaje = 100;
        progreso.style.width = porcentaje + "%";
        info.textContent = `Descargando... ${Math.round(porcentaje)}%`;

        if (porcentaje >= 100) {
          clearInterval(animacion);
          info.textContent = "‚úî Descarga iniciada";
          const link = document.createElement('a');
          link.href = url;
          link.setAttribute('download', '');
          link.style.display = 'none';
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);

          setTimeout(() => {
            barra.style.display = "none";
            info.textContent = "";
            descargaEnProgreso = false;
          }, 1600);
        }
      }, 110);
    }

    // ============ MODAL UTILIDADES ============
    const modal = document.getElementById("modalParche");
    const modalTitle = document.getElementById("modalTitle");
    const modalBody = document.getElementById("modalBody");
    const modalExtras = document.getElementById("modalExtras");
    const modalActions = document.getElementById("modalActions");
    const modalHint = document.getElementById("modalHint");

    function abrirModal() {
      modal.classList.add("activo");
      modal.setAttribute("aria-hidden", "false");
    }
    function cerrarModal() {
      modal.classList.remove("activo");
      modal.setAttribute("aria-hidden", "true");
      // Limpieza
      modalTitle.textContent = "";
      modalBody.innerHTML = "";
      modalExtras.innerHTML = "";
      modalActions.innerHTML = "";
      modalHint.textContent = "";
    }

    function estadoBuscando() {
      modalTitle.textContent = "Buscando parches";
      modalBody.innerHTML = `
        <div class="spinner" aria-hidden="true"></div>
        <div class="dots" aria-live="polite">Por favor espera</div>
      `;
      modalActions.innerHTML = `
        <button class="btn btn-rojo" id="btnCancelar">‚ùå Cancelar</button>
      `;
      document.getElementById("btnCancelar").onclick = cerrarModal;
      modalExtras.innerHTML = "";
      modalHint.textContent = "";
    }

    function estadoDecision() {
      modalTitle.textContent = "üîß Parche disponible";
      modalBody.innerHTML = `
        <div class="modal__text">Se encontr√≥ un parche para tu sistema. ¬øDeseas descargarlo?</div>
      `;
      modalActions.innerHTML = `
        <button class="btn" id="btnDescargar">‚úÖ Descargar</button>
        <button class="btn btn-rojo" id="btnIgnorar">‚ùå Ignorar</button>
      `;
      document.getElementById("btnDescargar").onclick = iniciarDescargaParche;
      document.getElementById("btnIgnorar").onclick = cerrarModal;
      modalExtras.innerHTML = "";
      modalHint.textContent = "Podr√°s volver a buscarlo cuando quieras.";
    }

    function estadoNoDisponible() {
      modalTitle.textContent = "No hay parches disponibles";
      modalBody.innerHTML = `<div class="modal__text">Por ahora no hay parches para tu versi√≥n.</div>`;
      modalActions.innerHTML = `<button class="btn" id="btnOk">Entendido</button>`;
      document.getElementById("btnOk").onclick = cerrarModal;
      modalExtras.innerHTML = "";
      modalHint.textContent = "";
    }

    function estadoError() {
      modalTitle.textContent = "Error al comprobar";
      modalBody.innerHTML = `<div class="modal__text">No se pudo verificar el parche. Revisa tu conexi√≥n o intenta m√°s tarde.</div>`;
      modalActions.innerHTML = `<button class="btn" id="btnCerrarErr">Cerrar</button>`;
      document.getElementById("btnCerrarErr").onclick = cerrarModal;
      modalExtras.innerHTML = "";
      modalHint.textContent = "";
    }

    function estadoDescargando() {
      modalTitle.textContent = "Descargando parche";
      modalBody.innerHTML = `<div class="modal__text">Iniciando descarga‚Ä¶</div>`;
      modalExtras.innerHTML = `
        <div class="progress" aria-hidden="true"><div id="barParche" class="progress__bar"></div></div>
        <div id="lblParche" class="modal__hint">0%</div>
      `;
      modalActions.innerHTML = `<button class="btn btn-rojo" id="btnCancelarDesc">Cancelar</button>`;
      document.getElementById("btnCancelarDesc").onclick = cerrarModal;
      modalHint.textContent = "";
    }

    function avanzarBarraParche(cbFin) {
      const bar = document.getElementById("barParche");
      const lbl = document.getElementById("lblParche");
      let pct = 0;
      const it = setInterval(() => {
        pct += Math.random() * 20 + 8;
        if (pct >= 100) pct = 100;
        bar.style.width = pct + "%";
        lbl.textContent = Math.round(pct) + "%";
        if (pct >= 100) {
          clearInterval(it);
          cbFin && cbFin();
        }
      }, 280);
      return it;
    }

    // ============ L√ìGICA PARCHES ============
    document.getElementById("btnBuscarParche").addEventListener("click", () => {
      abrirModal();
      estadoBuscando();

      setTimeout(() => {
  const url = archivos.parche;

  if (!url || url.includes("xxxxx")) {
    estadoNoDisponible();
    return;
  }

  // Si el link existe en configuraci√≥n, asumimos que hay parche
  estadoDecision();

}, 5000);

    function iniciarDescargaParche() {
      estadoDescargando();
      // Simulaci√≥n de progreso y luego dispara descarga real
      avanzarBarraParche(() => {
        // Disparar descarga real
        const a = document.createElement("a");
        a.href = archivos.parche;
        a.setAttribute("download", "ParcheDonVotex.exe");
        document.body.appendChild(a);
        a.click();
        a.remove();

        modalTitle.textContent = "Parche descargado";
        modalBody.innerHTML = `<div class="modal__text">Se inici√≥ la descarga del parche.</div>`;
        modalExtras.innerHTML = "";
        modalActions.innerHTML = `<button class="btn" id="btnCerrarFin">Cerrar</button>`;
        document.getElementById("btnCerrarFin").onclick = cerrarModal;
      });
    }

    // Cerrar modal con tecla ESC
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && modal.classList.contains("activo")) cerrarModal();
    });
  </script>
  <!-- Contacto -->
<!-- CONTACTO ESTILO CORREO -->
<section id="contacto" class="section contacto">
  <h2>Contacto</h2>
  <p>Env√≠a un mensaje directo al equipo de DonVotex.</p>

  <div class="mail-box">
    <div class="mail-header">
      <div class="field">
        <label>Para:</label>
        <input type="email" name="email" placeholder="soporte@donvotex.com" required>
      </div>
      <div class="field">
        <label>Asunto:</label>
        <input type="text" name="subject" placeholder="Escribe el asunto" required>
      </div>
    </div>

    <form id="contactForm" action="https://formspree.io/f/mpwkzbrp" method="POST">
      <textarea name="message" placeholder="Escribe tu mensaje aqu√≠..." required></textarea>
      <button type="submit" class="btn-enviar">Enviar</button>
    </form>

    <div id="formStatus" class="form-status"></div>
  </div>
</section>

<script>
  const form = document.getElementById('contactForm');
  const status = document.getElementById('formStatus');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    status.textContent = "Enviando...";
    status.style.color = "#00d9ff";

    const formData = new FormData(form);

    try {
      const res = await fetch(form.action, {
        method: 'POST',
        body: formData,
        headers: { 'Accept': 'application/json' }
      });

      if (res.ok) {
        form.reset();
        status.textContent = "‚úÖ Mensaje enviado correctamente.";
        status.style.color = "#00ff88";
      } else {
        status.textContent = "‚ö†Ô∏è Error al enviar. Intenta m√°s tarde.";
        status.style.color = "#ff6666";
      }
    } catch (err) {
      status.textContent = "‚ùå Error de conexi√≥n.";
      status.style.color = "#ff6666";
    }
  });
</script>


</body>
</html>




